@model MyMusicList.Areas.User.Models.User

@{
    ViewBag.Title = "Profile";
}

<h2>Profile</h2>

@{
    if(ViewBag.Msg != null)
    {
        if(ViewBag.Msg.ToString() == "profileUpdated")
        {
            <div class="alert alert-success">
                <button class="close" data-dismiss="alert"></button>
                <strong>Success!</strong> You have successfully udpated your profile!
            </div>
        }
    }
}

<div class="row-fluid">

    <div class="span6">
        <div class="portlet box red">

            <div class="portlet-title">
                <div class="caption"><i class="icon-reorder"></i>Edit Profile</div>
                <div class="tools">
                    <a href="javascript:;" class="collapse"></a>
                    <a href="javascript:;" class="reload"></a>
                </div>
            </div>

            <div class="portlet-body form">
               @using (Html.BeginForm("EditProfile", "User", FormMethod.Post, new { @class = "form-horizontal", enctype = "multipart/form-data", id = "validateSubmitForm" }))
               {
                   @Html.ValidationSummary()
                   
                   <input type="hidden" name ="ID" value="@Model.ID"/>
                   <input type="hidden" name="ImgUrl" value="@Model.ImgUrl" />
               
                   <div class="control-group">
                        <label class="control-label">Name</label>
                        <div class="controls">
                            @Html.TextBoxFor(x => x.Name, new { @class = "span6 m-wrap" })
                        </div>
                    </div> 
               
                   <div class="control-group">
                        <label class="control-label">Email</label>
                        <div class="controls">
                            @Html.TextBoxFor(x => x.Email, new { @class = "span6 m-wrap" })
                        </div>
                    </div> 
                    
                   <div class="control-group">
                    <label class="control-label">Profile Image:</label>
                    <div class="controls">
                        <div class="fileupload fileupload-new" data-provides="fileupload">
                            <div class="input-append"><div class="uneditable-input">
                                    <i class="icon-file fileupload-exists"></i> 
                                    <span class="fileupload-preview"></span>
                                </div><span class="btn btn-file">
                                <span class="fileupload-new">Select file</span>
                                <span class="fileupload-exists">Change</span>
                                <input type="file" class="default" name="file" id="file"/>
                                </span>
                                <a href="#" class="btn fileupload-exists" data-dismiss="fileupload">Remove</a>
                            </div>
                        </div>
                    </div>
                </div>
                   
                   <div class="control-group">
                    <label class="control-label">Current Image:</label>
                    <div class="controls">
                        <div style="width: 200px; height: 150px;" class="fileupload-new thumbnail">
                            @if(Model.ImgUrl != null && Model.ImgUrl != "")
                            {
                                <img style="width:200px; height:150px;" alt="cover" src="@Model.ImgUrl">
                            }
                            else
                            {
                                <img style="width:200px; height:150px;" alt="cover" src="http://www.placehold.it/200x150/EFEFEF/AAAAAA&amp;text=no+image">
                            }
                        </div>
                    </div>
                </div>
                   
                   
                   <div class="form-actions">
                        <button class="btn blue" type="submit">Submit</button>
                    </div>
               }
            </div>

        </div>
    </div>

</div>